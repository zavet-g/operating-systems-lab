# Контрольная работа по дисциплине "Операционные системы"

**Студент:** Зачетная книжка № 2110-ПИб-6440
**Вариант:** 29

## Вычисление варианта

```
S = 2 + 1 + 1 + 0 + 6 + 4 + 4 + 0 = 18
НОМЕР_ВАРИАНТА = (18 mod 4) × 10 + (18 mod 10) + 1
НОМЕР_ВАРИАНТА = 2 × 10 + 8 + 1 = 29
```

---

## Часть 1: Теоретическая

**Вопрос (вариант 29):** Сегментно-страничная организация памяти. Преимущества и недостатки данного способа.

### Ответ:

**Сегментно-страничная организация памяти** — комбинированный метод управления памятью, объединяющий преимущества сегментной и страничной организации.

#### Принцип работы:

1. Адресное пространство процесса делится на логические сегменты (код, данные, стек)
2. Каждый сегмент делится на страницы фиксированного размера
3. Виртуальный адрес состоит из: номер сегмента + номер страницы + смещение
4. Трансляция адреса в два этапа:
   - По номеру сегмента находится таблица страниц сегмента
   - По номеру страницы находится физический адрес страницы
   - К физическому адресу добавляется смещение

#### Преимущества:

1. **Логическая организация памяти** — логическое деление на сегменты упрощает разработку
2. **Эффективное использование памяти** — страницы избегают внешней фрагментации
3. **Разделение и защита** — сегменты имеют разные права доступа
4. **Разделяемые сегменты** — процессы разделяют сегменты (библиотеки)
5. **Динамический рост** — сегменты растут независимо
6. **Минимизация внутренней фрагментации** — благодаря страницам

#### Недостатки:

1. **Сложность реализации** — требуется сложное аппаратное обеспечение
2. **Увеличенное время трансляции** — два обращения к таблицам
3. **Больше служебной информации** — таблица сегментов + таблицы страниц
4. **Внутренняя фрагментация** — последняя страница сегмента заполнена не полностью
5. **Сложность управления** — ОС управляет сегментами и страницами

#### Примеры использования:

- Intel x86 (защищённый режим)
- Некоторые версии UNIX

---

## Часть 2: Практическая

### Задание А: Генеалогическое дерево процессов (вариант 29)

```
ОРАНЖЕВЫЙ (root)
  ├── ЖЕЛТЫЙ
  │     ├── ЗЕЛЕНЫЙ
  │     └── ГОЛУБОЙ
  ├── ГОЛУБОЙ
  └── ГОЛУБОЙ
```

### Задание Б: Дополнительные действия (вариант 5, 8, 13, 21, 29, 37, 39)

**Жёлтый процесс:**
1. Получает со stdin список активных процессов
2. Выводит процессы с **чётными PID**
3. Передаёт через **семафоры** оранжевому каждый PID (без других средств коммуникации)
4. Передаёт через **pipe** имена чётных процессов зелёному

**Оранжевый процесс:**
- Получает PID через семафоры
- Суммирует и выводит каждое значение и текущую сумму

**Зелёный процесс:**
- Получает имена через pipe от жёлтого
- Записывает в файл

**Голубые процессы:**
- Выводят PID и PPID

---

## Компиляция и запуск

### Компиляция:
```bash
make
```

### Запуск:
```bash
# Передать список процессов через pipe
ps -e | ./os-lab-variant29

# Или использовать make
make test
```

### Очистка:
```bash
make clean
```

---

## Используемые системные вызовы

**Управление процессами:**
- `fork()` — создание дочерних процессов
- `getpid()`, `getppid()` — получение PID и PPID
- `wait()` — ожидание завершения дочерних процессов
- `exit()` — завершение процесса

**Межпроцессное взаимодействие:**
- **Семафоры POSIX:** `sem_open()`, `sem_wait()`, `sem_post()`, `sem_close()`, `sem_unlink()`
- **Pipe:** `pipe()`, `read()`, `write()`

**Работа с файлами:**
- `open()`, `write()`, `close()` — системные вызовы

---

## Результаты работы

**На экране:**
- Информация о запуске/завершении процессов с PID и PPID
- Список процессов с чётными PID (ЖЁЛТЫЙ)
- Получаемые PID и сумма (ОРАНЖЕВЫЙ)

**В файле `even_processes.txt`:**
- Имена процессов с чётными PID

---

## Структура проекта

```
operating-systems-lab/
  ├── main.c                    # Исходный код
  ├── Makefile                  # Файл сборки
  ├── README.md                 # Документация
  ├── even_processes.txt        # Результат (создаётся при выполнении)
  └── os-lab-variant29          # Исполняемый файл (создаётся при компиляции)
```

---

## Особенности реализации

1. **Семафоры** для синхронизации передачи PID (жёлтый → оранжевый)
2. **Pipe** для передачи имён (жёлтый → зелёный)
3. Корректная обработка ввода от `ps -e`
4. Вывод PID/PPID для построения генеалогического дерева
5. Именованные POSIX-семафоры для межпроцессного взаимодействия

---

## Тестирование

Протестировано на macOS (Darwin kernel).

**Проверено:**
- ✓ Корректное создание дерева процессов
- ✓ Фильтрация процессов с чётными PID
- ✓ Передача данных через семафоры (оранжевый суммирует PID)
- ✓ Передача данных через pipe (зелёный записывает в файл)
- ✓ Вывод PID и PPID каждого процесса
